(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{5868:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit",function(){return n(7141)}])},3226:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(4848),s=n(6540),l=n(1106),i=n.n(l),o=n(3914),c=n(6188);function r(e){let{children:t}=e,[n,l]=(0,s.useState)(!0),r=[{path:"/admin",icon:c.cNj,label:"HOME"},{path:"/employees",icon:c.gdJ,label:"社員一覧"},{path:"/projects",icon:c.AgW,label:"案件一覧"},{path:"/edit",icon:c.X46,label:"人員処理"},{path:"/attendance",icon:c.e68,label:"勤怠管理"},{path:"/education",icon:c.cNj,label:"新人教育"}];return(0,a.jsxs)("div",{className:"layout-container",children:[(0,a.jsx)("header",{className:"header",children:"ProtoSystem"}),(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)("nav",{className:"sidebar ".concat(n?"open":"hidden"),children:(0,a.jsx)("ul",{className:"menu",children:r.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)(i(),{href:e.path,className:"menu-item",children:[(0,a.jsx)(o.g,{icon:e.icon,style:{marginRight:"8px"}}),e.label]})},e.path))})}),(0,a.jsx)("button",{className:"sidebar-toggle-button",onClick:()=>{l(!n)},children:(0,a.jsx)(o.g,{icon:n?c.rCU:c.ckx,size:"lg"})}),(0,a.jsx)("main",{className:"main-content ".concat(n?"":"collapsed"),children:t})]})]})}},7141:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(4848),s=n(6540),l=n(6715),i=n(3226);let o=()=>{let e=(0,l.useRouter)(),{id:t}=e.query,n=!!t,[o,c]=(0,s.useState)({id:"",name:"",email:"",money:"",in:"",out:"",mail:"",status:"",project:"",skillsheet:""});(0,s.useEffect)(()=>{n&&fetch("http://localhost:8080/api/employees/".concat(t)).then(e=>e.json()).then(e=>c(e)).catch(e=>console.error("Error fetching employee:",e))},[t,n]);let r=(e,t)=>{c(n=>({...n,[e]:t}))},h=async()=>{let a=n?"PUT":"POST",s=n?"http://localhost:8080/api/employees/".concat(t):"http://localhost:8080/api/employees",l={...o,id:parseInt(o.id,10)||0,money:parseInt(o.money,10)||0,in:parseInt(o.in,10)||0,out:parseInt(o.out,10)||0};!n&&l._id&&delete l._id,(await fetch(s,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?(alert(n?"社員情報を更新しました":"社員を追加しました"),e.push("/employees")):alert("エラーが発生しました")},p=async()=>{n&&confirm("本当に削除しますか？")&&((await fetch("http://localhost:8080/api/employees/".concat(t),{method:"DELETE"})).ok?(alert("社員を削除しました"),e.push("/employees")):alert("削除に失敗しました"))},d={id:"社員ID",name:"氏名",email:"メールアドレス",money:"単価",in:"参画開始",out:"参画終了",mail:"連絡先",status:"ステータス",project:"参画先",skillsheet:"スキルシート"};return(0,a.jsx)(i.A,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:n?"社員情報を編集":"新しい社員を追加"}),(0,a.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[Object.keys(o).map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:[d[e]||e,":"]}),(0,a.jsx)("input",{type:"text",value:o[e],onChange:t=>r(e,t.target.value)})]},e)),(0,a.jsx)("button",{type:"button",onClick:h,children:n?"更新":"追加"}),n&&(0,a.jsx)("button",{type:"button",onClick:p,style:{marginLeft:"10px",color:"red"},children:"削除"})]})]})})}},6715:(e,t,n)=>{e.exports=n(4009)}},e=>{var t=t=>e(e.s=t);e.O(0,[69,269,636,593,792],()=>t(5868)),_N_E=e.O()}]);